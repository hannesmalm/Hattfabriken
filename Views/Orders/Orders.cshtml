@{
    ViewData["Title"] = "Orders";
}

<div class="container">
    <h2>Orders</h2>
    <div class="row">
        <div class="col-md-3">
            <h3>To-do</h3>
            <table id="todoTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Column 1</th>
                        <th>Column 2</th>
                        <th>Destination</th> <!-- Button column -->
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Task A</td>
                        <td>Task Description A</td>
                        <td>
                            <select id="destinationSelect">
                                <option value="ottoTable">Otto</option>
                                <option value="judithTable">Judith</option>
                            </select>
                            <button class="btn btn-primary" onclick="moveToTable('Task A', 'Task Description A')">Move</button>
                            <button class="btn btn-info" onclick="openPDF('Task A', 'Task Description A')">Open PDF</button>
                        </td>
                    </tr>
                    <!-- Add more tasks as needed -->
                </tbody>
            </table>
        </div>
        <div class="col-md-3">
            <h3>Otto on-going</h3>
            <table id="ottoTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Column A</th>
                        <th>Column B</th>
                        <th>Actions</th> <!-- Button column -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Items will be dynamically added here -->
                </tbody>
            </table>
        </div>
        <div class="col-md-3">
            <h3>Judith on-going</h3>
            <table id="judithTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Actions</th> <!-- Button column -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Items will be dynamically added here -->
                </tbody>
            </table>
        </div>
        <div class="col-md-3">
            <h3>Done</h3>
            <table id="doneTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Data X</th>
                        <th>Data Y</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Items will be dynamically added here -->
                </tbody>
            </table>
        </div>
    </div>
</div>

@section scripts {
    <script>
        function moveToTable(taskName, taskDescription) {
            var destinationTableId = document.getElementById("destinationSelect").value;
            var targetTable = document.getElementById(destinationTableId).getElementsByTagName('tbody')[0];

            // Create a new row in the target table and append the task data
            var newRow = targetTable.insertRow();
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);
            cell1.innerHTML = targetTable.rows.length + 1; // Add 1 for new row
            cell2.innerHTML = taskName;
            cell3.innerHTML = taskDescription;

            if (destinationTableId !== 'doneTable') {
                cell4.innerHTML = '<button class="btn btn-success" onclick="moveToDone(this)">Move to Done</button>' +
                    '<button class="btn btn-info" onclick="openPDF(\'' + taskName + '\', \'' + taskDescription + '\')">Open PDF</button>';
            }

            // Remove the row from the original table
            event.target.parentNode.parentNode.remove();
        }

        function moveToDone(button) {
            var taskRow = button.parentNode.parentNode;
            var taskName = taskRow.cells[1].innerText;
            var taskDescription = taskRow.cells[2].innerText;

            var doneTable = document.getElementById("doneTable").getElementsByTagName('tbody')[0];

            // Create a new row in the "Done" table and append the task data
            var newRow = doneTable.insertRow();
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            cell1.innerHTML = doneTable.rows.length + 1; // Add 1 for new row
            cell2.innerHTML = taskName;
            cell3.innerHTML = taskDescription;

            // Remove the row from the current table
            taskRow.remove();
        }

        function openPDF(taskName, taskDescription) {
            // For demonstration, we'll just alert, replace this with your logic to open PDF
            alert("Opening PDF for: " + taskName + " - " + taskDescription);
        }
    </script>
}
